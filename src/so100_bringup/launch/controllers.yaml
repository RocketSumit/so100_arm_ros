%YAML 1.2
---
launch:
    - arg:
          name: use_sim_time
          default: "false"

    - arg:
          name: robot_description_file
          default: "$(find-pkg-share so100_bringup)/config/so100_arm.urdf.xacro"

    - node:
          pkg: robot_state_publisher
          exec: robot_state_publisher
          name: robot_state_publisher
          output: screen
          param:
              - name: use_sim_time
                value: "$(var use_sim_time)"
              - name: robot_description
                value: "$(command '$(find-exec xacro) $(var robot_description_file)')"
    - node:
          pkg: "controller_manager"
          exec: "ros2_control_node"
          args: "--ros-args --params-file $(find-pkg-share so100_bringup)/config/ros2_controllers.yaml"
          remap:
              - from: "~/robot_description"
                to: "/robot_description"
          output: "screen"
    - node:
          pkg: "controller_manager"
          exec: "spawner"
          name: "spawner_joint_state_broadcaster"
          args: "joint_state_broadcaster --controller-manager /controller_manager"
    - node:
          pkg: "controller_manager"
          exec: "spawner"
          name: "spawner_arm_controller"
          args: "arm_controller --controller-manager /controller_manager"
    - node:
          pkg: "controller_manager"
          exec: "spawner"
          name: "spawner_gripper_controller"
          args: "gripper_controller --controller-manager /controller_manager"
#     - node:
#           pkg: "rviz2"
#           exec: "rviz2"
#           name: "rviz"
#           args: "-d $(find-pkg-share so100_bringup)/config/display.rviz"
#           output: "screen"
